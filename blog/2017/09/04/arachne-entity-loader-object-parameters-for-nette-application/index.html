<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta name="description" content="Oficiální stránky PHP komunity">
    <meta name="keywords" content="PHP, komunita, programování">
    <meta name="author" content="https://pehapkari.cz">
    <meta name="robots" content="index, follow">

    <meta property="og:image" content="/images/php-square.png">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <link rel="alternate" type="application/rss+xml" title="Péhápkaři.cz Blog RSS" href="/rss.xml">

    <link href="/assets/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <link href="/assets/bootstrap/bootstrap.min.css?v=0.6" rel="stylesheet" type="text/css">

    <link href="/assets/css/style.css?v=0.6" rel="stylesheet" type="text/css">

    <link href="/favicon.ico" rel="shortcut icon">

    <title>Arachne/EntityLoader - Object Parameters for Nette/Application</title>
</head>

    <body>
<header>
    <div class="hidden-sm-down">
        <div class="container-fluid">
            <a href="/"><img src="/assets/images/logo-header.svg?ver" alt="" height="50"></a>

            <nav class="navbar top-navigation">
                <a href="/blog/" class="active">
                    <em class="fa fa-newspaper-o fa-fw"></em>
                    Blog
                </a>
                <a href="/vzdelavej-se/">
                    <em class="fa fa-graduation-cap fa-fw"></em>
                    Školení
                </a>
                <a href="/mentori/">
                    <em class="fa fa-handshake-o fa-fw"></em>
                    Mentoři
                </a>

                    

                    <a href="https://github.com/pehapkari/pehapkari.cz/edit/master/source/_posts/2017/2017-09-04-arachne-entity-loader-object-parameters-for-nette-application.md" class="hidden-sm">
                        <em class="fa fa-fw fa-pencil"></em>
                        Edit
                    </a>
            </nav>
        </div>
    </div>

    <div id="mobile-menu" class="row text-center hidden-md-up">
        <div class="container">
            <a href="/" class="col-3 col-sm-3">
                <em class="fa fa-home"></em>
                <br>
                Home
            </a>
            <a href="/blog/" class="col-3 col-sm-3 active">
                <em class="fa fa-book fa-fw"></em>
                <br>
                Blog
            </a>
            <a href="/vzdelavej-se/" class="col-3 col-sm-3">
                <em class="fa fa-graduation-cap fa-fw"></em>
                <br>
                Školení
            </a>
            <a href="/mentori/" class="col-3 col-sm-3">
                <em class="fa fa-handshake-o fa-fw"></em>
                <br>
                Mentoři
            </a>
        </div>
    </div>
</header>

        <div id="article">
            <div class="container">
                <h1 class="h2 text-center">Arachne/EntityLoader - Object Parameters for Nette/Application</h1>

                <div class="row text-center">
                    <div class="col-md-12">
<div class="metadataLine">

    <p>
        <em class="fa fa-clock-o fa-fw"></em>
        2 min

        |

        by <strong>Jáchym Toušek</strong>

        &ndash;

        <time datetime="2017-09-Mon">
            4. 9. 2017
        </time>

    </p>
</div>
                        <div id="reviewed_by">
                            <p>Peer-Reviewed by:
                                    Tomáš Votruba, 
                                    David Matějka, 
                                    Milan Felix Šulc
                            </p>
                        </div>
                    </div>
                </div>

                <br>

                <div id="article-content">
                    <p class="perex">Ever wanted to get rid of <code>EntityManager::find($id)</code> as the first thing in your every presenter action?
With <a href="https://github.com/Arachne/EntityLoader">Arachne/EntityLoader</a> you can.
Of course it is not limited to Doctrine, you can easily use it with a different ORM library.</p>

                    
<h2 id="the-basics"><a class="anchor" href="#the-basics" aria-hidden="true"><span class="anchor-icon">#</span></a>The basics</h2>
<p>Normally most of your presenters would look like this.</p>
<pre><code class="language-php">use App\Entity\Product;
use Nette\Application\UI\Presenter;

class ProductPresenter extends Presenter
{
    public function actionDetail(int $id): void
    {
        $product = $this-&gt;entityManager-&gt;getRepository(Product::class)-&gt;find($id);
        if (!$product) {
            $this-&gt;error();
        }

        // Do stuff with $product.
    }
}</code></pre>
<p>With Arachne/EntityLoader it is much easier.</p>
<pre><code class="language-php">use App\Entity\Product;
use Arachne\EntityLoader\Application\EntityLoaderPresenterTrait;
use Nette\Application\UI\Presenter;

class ProductPresenter extends Presenter
{
    use EntityLoaderPresenterTrait;

    public function actionDetail(Product $product): void
    {
        // ...
    }
}</code></pre>
<p>Now how would you make a link to a action that needs object? Of course you can use the object if you have it. But if you have a case where you don't need the actual entities for anything and only have their IDs it will work as well.</p>
<pre><code>{* All of these are fine. *}
&lt;a n:href="Product:detail, product =&gt; $product"&gt;Product detail&lt;/a&gt;
&lt;a n:href="Product:detail, product =&gt; $product-&gt;getId()"&gt;Product detail&lt;/a&gt;
&lt;a n:href="Product:detail, product =&gt; $productId"&gt;Product detail&lt;/a&gt;</code></pre>
<h2 id="it-works-everywhere"><a class="anchor" href="#it-works-everywhere" aria-hidden="true"><span class="anchor-icon">#</span></a>It works everywhere</h2>
<p>It doesn't work just for actions but for signals as well.</p>
<pre><code class="language-php">    public function handleDelete(Product $product): void
    {
        // ...
    }</code></pre>
<p>Persistent parameters are no problem either.</p>
<pre><code class="language-php">    /**
     * @var Product
     * @persistent
     */
    public $product;</code></pre>
<p><strong>And all of it works in components as well.</strong></p>
<h2 id="request-object-with-entities"><a class="anchor" href="#request-object-with-entities" aria-hidden="true"><span class="anchor-icon">#</span></a>Request Object with Entities</h2>
<p>Unlike older solutions like <a href="https://github.com/DeprecatedPackages/DoctrineMethodsHydrator">Zenify/DoctrineMethodsHydrator</a> EntityLoader will put the entities into your <code>Nette\Application\Request</code> object as well. This will make them available in more places than just your actions and signals. Like if you need to pass the product to a component.</p>
<pre><code class="language-php">class ProductPresenter extends Presenter
{
    public function createComponentForm(): ProductForm
    {
        /** @var Product $product */
        $product = $this-&gt;getRequest()-&gt;getParameter('product');

        return $this-&gt;productFormFactory-&gt;create($product);
    }
}</code></pre>
<h2 id="scalar-types"><a class="anchor" href="#scalar-types" aria-hidden="true"><span class="anchor-icon">#</span></a>Scalar Types</h2>
<p>For consistency it actually converts scalar types like integers as well. This is not too important as newer versions of Nette do that too but with EntityLoader they will be converted in the Request as well.</p>
<h2 id="conclusion"><a class="anchor" href="#conclusion" aria-hidden="true"><span class="anchor-icon">#</span></a>Conclusion</h2>
<p>Having objects in <code>Nette\Application\Request</code> may not look like a killer feature at first. The point is that having entities in Request also unleashes the full power of both <a href="https://github.com/Arachne/ParameterValidation">Arachne/ParameterValidation</a> and <a href="https://github.com/Arachne/SecurityVerification">Arachne/SecurityVerification</a>. I'll go into details in the next article.</p>
                </div>
            </div>

            <br>

            <div class="intermezzo-smaller">
                <div class="container">

Deprecated: "{$post|similarPosts} Latte filter was deprecated and will be removed in Statie 3.0. Use {$post|relatedPosts} instead." in /home/travis/build/pehapkari/pehapkari.cz/vendor/symplify/statie/packages/RelatedPosts/src/Latte/Filter/RelatedPostsFilter.php on line 38

Call Stack:
    0.0001     362888   1. {main}() /home/travis/build/pehapkari/pehapkari.cz/vendor/symplify/statie/bin/statie:0
    0.0003     371288   2. include_once('/home/travis/build/pehapkari/pehapkari.cz/vendor/symplify/statie/bin/statie.php') /home/travis/build/pehapkari/pehapkari.cz/vendor/symplify/statie/bin/statie:4
    0.3133    7501304   3. Symfony\Component\Console\Application->run() /home/travis/build/pehapkari/pehapkari.cz/vendor/symplify/statie/bin/statie.php:43
    0.3220    7677016   4. Symfony\Component\Console\Application->doRun() /home/travis/build/pehapkari/pehapkari.cz/vendor/symfony/console/Application.php:125
    0.3223    7677016   5. Symfony\Component\Console\Application->doRunCommand() /home/travis/build/pehapkari/pehapkari.cz/vendor/symfony/console/Application.php:224
    0.3223    7677016   6. Symplify\Statie\Console\Command\GenerateCommand->run() /home/travis/build/pehapkari/pehapkari.cz/vendor/symfony/console/Application.php:888
    0.3234    7681744   7. Symplify\Statie\Console\Command\GenerateCommand->execute() /home/travis/build/pehapkari/pehapkari.cz/vendor/symfony/console/Command/Command.php:262
    0.3235    7681744   8. Symplify\Statie\Application\StatieApplication->run() /home/travis/build/pehapkari/pehapkari.cz/vendor/symplify/statie/src/Console/Command/GenerateCommand.php:43
    0.3710    9101952   9. Symplify\Statie\Application\StatieApplication->processTemplates() /home/travis/build/pehapkari/pehapkari.cz/vendor/symplify/statie/src/Application/StatieApplication.php:63
    0.3714    9112680  10. Symplify\Statie\Renderable\RenderableFilesProcessor->processFiles() /home/travis/build/pehapkari/pehapkari.cz/vendor/symplify/statie/src/Application/StatieApplication.php:105
    0.8253    9983752  11. Symplify\Statie\Renderable\Latte\LatteFileDecorator->decorateFiles() /home/travis/build/pehapkari/pehapkari.cz/vendor/symplify/statie/src/Renderable/RenderableFilesProcessor.php:64
   13.4281   11724064  12. Symplify\Statie\Renderable\Latte\LatteFileDecorator->decorateFile() /home/travis/build/pehapkari/pehapkari.cz/vendor/symplify/statie/src/Renderable/Latte/LatteFileDecorator.php:48
   13.4281   11725512  13. Symplify\Statie\Renderable\Latte\LatteFileDecorator->renderToString() /home/travis/build/pehapkari/pehapkari.cz/vendor/symplify/statie/src/Renderable/Latte/LatteFileDecorator.php:79
   13.4281   11725624  14. Symplify\Statie\FlatWhite\Latte\LatteRenderer->renderExcludingHighlightBlocks() /home/travis/build/pehapkari/pehapkari.cz/vendor/symplify/statie/src/Renderable/Latte/LatteFileDecorator.php:127
   13.4282   11736672  15. Latte\Engine->renderToString() /home/travis/build/pehapkari/pehapkari.cz/vendor/symplify/statie/packages/FlatWhite/src/Latte/LatteRenderer.php:68
   13.4484   11703816  16. Template8b2aea9f9f->capture() /home/travis/build/pehapkari/pehapkari.cz/vendor/latte/latte/src/Latte/Engine.php:81
   13.4485   11721136  17. Template8b2aea9f9f->render() /home/travis/build/pehapkari/pehapkari.cz/vendor/latte/latte/src/Latte/Runtime/Template.php:326
   13.4486   11727576  18. Templatefbb92eba61->render() /home/travis/build/pehapkari/pehapkari.cz/vendor/latte/latte/src/Latte/Runtime/Template.php:176
   13.4486   11728056  19. Templatefbb92eba61->main() /home/travis/build/pehapkari/pehapkari.cz/vendor/latte/latte/src/Latte/Runtime/Template.php:198
   13.4494   11739304  20. Templatefbb92eba61->renderBlock() /tmp/_flat_white_latte_factory_cache/fbb92eba61.php:89
   13.4494   11739304  21. Templatefbb92eba61->blockRelatedPosts() /home/travis/build/pehapkari/pehapkari.cz/vendor/latte/latte/src/Latte/Runtime/Template.php:282
   13.4494   11739328  22. Symplify\Statie\RelatedPosts\Latte\Filter\RelatedPostsFilter->Symplify\Statie\RelatedPosts\Latte\Filter\{closure}() /tmp/_flat_white_latte_factory_cache/fbb92eba61.php:169
   13.4494   11739328  23. trigger_error() /home/travis/build/pehapkari/pehapkari.cz/vendor/symplify/statie/packages/RelatedPosts/src/Latte/Filter/RelatedPostsFilter.php:38


        <h2>You Might Also Like</h2>

        <ul id="related-posts">
                <li>
                    <a href="/blog/2017/09/11/arachne-verifier-plus-arachne-entity-loader-using-entities-in-verifier-rules">Arachne/Verifier + Arachne/EntityLoader - Using Entities in Verifier Rules &raquo;</a>
                </li>
                <li>
                    <a href="/blog/2017/08/28/arachne-verifier-request-validator-for-nette-application">Arachne/Verifier - Request Validator for Nette/Application &raquo;</a>
                </li>
                <li>
                    <a href="/blog/2017/08/21/arachne-security-simplified-authorizator-and-fixed-acl-callbacks">Arachne/Security - Simplified Authorizator and Fixed ACL Callbacks &raquo;</a>
                </li>
                <li>
                    <a href="/blog/2017/08/14/arachne-security-separate-authentication-and-session-refresh">Arachne/Security - Separate Authentication and Session Refresh &raquo;</a>
                </li>
        </ul>
                </div>
            </div>

            <div class="container">
<div id="disqus_thread"></div>

<script type="text/javascript">
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//' + "pehapkari" + '.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
            </div>

            <br>
        </div>

        <script src="/assets/prism/prism.js"></script>
        <script id="dsq-count-scr" src="https://pehapkari.disqus.com/count.js" async defer></script>

<script>
    ga=function(){ ga.q.push(arguments) };
    ga.q=[];
    ga.l=+new Date;
    ga('create', "UA-89860072-1", 'auto');
    ga('send','pageview');
</script>
<script async defer src="https://www.google-analytics.com/analytics.js"></script>
<script>
    !function(f,b,e,v,n,t,s){ if(f.fbq)return;n=f.fbq=function(){ n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
            document,'script','https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', "201338863559186");
    fbq('track', 'PageView');
</script>
    </body>
</html>


    <meta property="og:type" content="article">
    <meta property="og:title" content="Arachne/EntityLoader - Object Parameters for Nette/Application">
    <meta property="og:description" content="Ever wanted to get rid of EntityManager::find($id) as the first thing in your every presenter action?
With Arachne/EntityLoader you can.
Of course it is not limited to Doctrine, you can easily use it with a different ORM library.">
    <meta property="og:url" content="https://pehapkari.cz/blog/2017/09/04/arachne-entity-loader-object-parameters-for-nette-application/">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Arachne/EntityLoader - Object Parameters for Nette/Application">
    <meta name="twitter:description" content="Ever wanted to get rid of EntityManager::find($id) as the first thing in your every presenter action?
With Arachne/EntityLoader you can.
Of course it is not limited to Doctrine, you can easily use it with a different ORM library.">


    <link href="/assets/prism/prism.css" rel="stylesheet" type="text/css">


